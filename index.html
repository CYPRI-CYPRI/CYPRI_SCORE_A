<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CYPRI Score Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            max-width: 900px;
        }
        h1 {
            color: #2c3e50;
        }
        .criterion-box {
            border: 2px solid #2c3e50;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 40px;
            color: black;
        }
        .criterion-box:nth-of-type(1) {
            background-color: #fde725;
        }
        .criterion-box:nth-of-type(2) {
            background-color: #a0da39;
        }
        .criterion-box:nth-of-type(3) {
            background-color: #4ac16d;
        }
        .criterion-box:nth-of-type(4) {
            background-color: #1fa187;
        }
        .criterion-box:nth-of-type(5) {
            background-color: #3b528b;
        }
        .details {
            font-size: 14px;
            margin-top: 12px;
            background: rgba(255, 255, 255, 0.4);
            padding: 12px;
            border-left: 3px solid #2c3e50;
            white-space: pre-line;
        }
        fieldset {
            border: 2px solid #2c3e50;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 40px;
            background-color: #277f8e;
            color: black;
        }
        legend {
            font-weight: bold;
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 10px;
            padding: 0 10px;
        }
        button {
            margin-top: 25px;
            padding: 12px 20px;
            font-size: 18px;
            cursor: pointer;
        }
        #result {
            margin-top: 25px;
            font-size: 22px;
            font-weight: bold;
        }
    </style>
</head>
<body>
<h1>CYPRI Score Calculator</h1>

<form id="cypri-form">

<div class="criterion-box">
<label><input type="checkbox" name="psychiatric_med"> The use of psychiatric medication (1 point)</label>
<div class="details">
Psychiatric drugs classified as CYP2D6/CYP2C19 substrates [1-5].<br>Examples: atomoxetine, modafinil, amitriptyline, nortriptyline, paroxetine, citalopram, escitalopram, fluoxetine, aripiprazole, risperidone, diazepam, venlafaxine.
</div>
</div>

<div class="criterion-box">
<label><input type="checkbox" name="somatic_med"> The use of somatic medication (1 point)</label>
<div class="details">
Non-psychiatric drugs that are CYP2D6/CYP2C19 substrates [2-5].<br>Examples: clopidogrel, codeine, tramadol, omeprazole, pantoprazole, ondansetron, metoclopramide, voriconazole, metoprolol, propafenone.
</div>
</div>

<div class="criterion-box">
<label><input type="checkbox" name="treatment_resistance"> Treatment-resistant condition (1 point)</label>
<div class="details">
Failure of two or more adequate medication trials despite adherence and dosing [6].
</div>
</div>

<fieldset>
<legend>Drug plasma levels (choose one)</legend>

<label><input type="radio" name="tdm" value="3"> Levels do not correlate with dose (3 points)</label>
<div class="details">
High dose but low level or low dose but high level [1].
</div>

<label><input type="radio" name="tdm" value="1"> Levels outside therapeutic range (1 point)</label>
<div class="details">
Outside minimum-maximum range or abnormal metabolite ratio [1].
</div>

<label><input type="radio" name="tdm" value="0" checked> None</label>
</fieldset>

<div class="criterion-box">
<label><input type="checkbox" name="adr"> Clinically significant ADRs (3 points)</label>
<div class="details">
Based on clinical observation:<br>
- Dose adjustment<br>
- Increased monitoring<br>
- Discontinuation<br>
- Hospitalization<br>
- Unable to tolerate standard dosing [1,7,8]
</div>
</div>

<button type="button" onclick="calculateScore()">Calculate Score</button>
</form>

<h2 id="result"></h2>

<h3>References:</h3>
<ol>
<li>Hiemke C, et al. Pharmacopsychiatry 2018.</li>
<li>Flockhart Table.</li>
<li>PharmGKB.</li>
<li>CPIC Guidelines.</li>
<li>DPWG Guidelines.</li>
<li>Howes O, Mol Psychiatry 2022.</li>
<li>Lingjaerde O, UKU-SERS-Pat, 2001.</li>
<li>Dreher J, ADR scale, 1999.</li>
</ol>

<script>
function calculateScore() {
    let score = 0;
    score += document.querySelector('input[name="psychiatric_med"]').checked ? 1 : 0;
    score += document.querySelector('input[name="somatic_med"]').checked ? 1 : 0;
    score += document.querySelector('input[name="treatment_resistance"]').checked ? 1 : 0;
    score += parseInt(document.querySelector('input[name="tdm"]:checked').value);
    score += document.querySelector('input[name="adr"]').checked ? 3 : 0;
    document.getElementById("result").innerText = "Total CYPRI Score: " + score;
}
</script>

</body>
</html>
